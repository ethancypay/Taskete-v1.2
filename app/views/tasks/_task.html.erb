<div data-controller="toggle">
  <div data-task-id=<%= task.id %> data-workflow-id=<%= workflow.id %> data-controller="item" class="t-card border py-4 px-4 mb-2 mx-6">
    <div class="flex justify-between">
      <button class="text-sm flex-grow text-left" data-action="click->item#getItems click->toggle#hide">
        <%= task.title %>
      </button>

      <button data-action="click-> task#markComplete" class='inline-block text-indigo-500 text-sm'>
        Mark as complete
      </button>
    </div>
    <div class="flex hidden" data-toggle-target="hide" >

      <%# Items section %>
      <div class="flex-grow pr-2 border-r">
        <ul data-item-target="list" data-controller="drag" data-drag-url="/items/:id/move" >
        </ul>

        <% if !workflow.activated? %>
          <%= render partial: 'items/itemadd', locals: {task_id: task.id, workflow: workflow} %>
        <% end %>
      </div>

      <%# Members Section %>
      <div class="w-40 flex flex-col">
        <ul class="flex-grow">
        </ul>

        <% if !workflow.activated? %>
          <%= render partial: 'members/add_member', locals: {task: task} %>
        <% end %>
      </div>

    </div>

  </div>
</div>
